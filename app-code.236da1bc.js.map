{"mappings":"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","sources":["<anon>","js/renderHTMLProduct_event_btn_addToCart_BuyNow_btnDeleteitemCart.js"],"sourcesContent":["function renderHTMLProduct_event_btn_addToCart_BuyNow() {\n    for(let i = 0; i < DB.products.length; i++){\n        var productItem = `\n            <div class=\"product-card\" product-id=\"$$product-id$$\">\n          <div class=\"product-img-wrapper\">\n            <!-- Link \\u{1EA3}nh m\\u{1EDB}i c\\u{1EE7}a b\\u{1EA1}n -->\n            <img src=\"https://picsum.photos/200/300\" alt=\"S\\u{1EA3}n ph\\u{1EA9}m\">\n        \n            <!-- C\\xe1c Badge \\u{111}\\xe8 l\\xean \\u{1EA3}nh \\u{1EDF} g\\xf3c tr\\xe1i d\\u{1B0}\\u{1EDB}i -->\n            <div class=\"badge-container\">\n              <span class=\"badge badge-date\">25-2</span>\n              <span class=\"badge badge-voucher\">Voucher</span>\n            </div>\n          </div>\n\n          <div class=\"product-btn-buy-now-add-to-cart d-flex-j-sb\">\n            <button product-id=\"$$product-id$$\" class=\"btn-buy-now btn-buy-now-add-to-cart\">Mua Ngay</button>\n            <button product-id=\"$$product-id$$\" class=\"btn-add-to-cart btn-buy-now-add-to-cart\">Th\\xeam V\\xe0o Gi\\u{1ECF}</button>\n          </div>\n        \n          <div class=\"product-info\">\n            <div class=\"product-name\">\n              <span class=\"label-love\">Y\\xeau th\\xedch+</span> \n              <span class=\"name\">$$product-name$$</span>\n            </div>\n            <div class=\"product-price-row\">\n              <span class=\"currency\">$$price$$\\u{20AB}</span>\n              <span class=\"price\"></span>\n              <span class=\"sold\">\\u{110}\\xe3 b\\xe1n $$sold$$</span>\n            </div>\n          </div>\n        \n          <!-- N\\xfat T\\xecm s\\u{1EA3}n ph\\u{1EA9}m t\\u{1B0}\\u{1A1}ng t\\u{1EF1} (C2) n\\u{1EB1}m d\\u{1B0}\\u{1EDB}i c\\xf9ng -->\n          <a href=\"/search-similar\" class=\"btn-similar\">T\\xecm s\\u{1EA3}n ph\\u{1EA9}m t\\u{1B0}\\u{1A1}ng t\\u{1EF1}</a>\n        </div>\n         `;\n        let product = DB.products[i];\n        let productItemRendered = productItem.replaceAll(\"$$product-id$$\", product.id).replaceAll(\"$$product-name$$\", product.name).replaceAll(\"$$price$$\", product.price.formatMoney()).replaceAll(\"$$sold$$\", product.sold);\n        $(`.product-grid`).append(productItemRendered);\n        // find button buy now and add to cart\n        $(`.btn-buy-now[product-id=\"${product.id}\"]`).click(function() {\n            btnBuyNowClick(product);\n        });\n        // find button add to cart and add to cart\n        $(`.btn-add-to-cart[product-id=\"${product.id}\"]`).click(function() {\n            product.quantity = 1;\n            product.totalPrice = product.price;\n            btnAddToCartClick(product);\n        });\n    }\n}\nfunction btnBuyNowClick(product) {\n    let user = c_load(saveKEY.userLogin);\n    if (!user) {\n        showToast(\"Vui l\\xf2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 mua h\\xe0ng\", 'error', 2000);\n        c_openModal(\"modalLoginForm\");\n        return;\n    }\n}\nfunction btnAddToCartClick(product, flgShowToast) {\n    let user = c_load(saveKEY.userLogin);\n    if (!user) {\n        showToast(\"Vui l\\xf2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 th\\xeam s\\u1EA3n ph\\u1EA9m v\\xe0o gi\\u1ECF h\\xe0ng\", \"error\", 2000);\n        c_openModal(\"modalLoginForm\");\n        return;\n    }\n    if (flgShowToast != 'no-toast') showToast(`\\u{110}\\xe3 th\\xeam ${product.name} v\\xe0o gi\\u{1ECF} h\\xe0ng`, \"success\", 1500);\n    let isChecked = product.isChecked ? product.isChecked : false;\n    isChecked = isChecked ? \"checked='checked'\" : '';\n    var catItem = `\n    <div class=\"cart-item\" product-id=\"$$product-id$$\">\n\n        <div class=\"d-flex-a-c\">\n            <img src=\"https://picsum.photos/200/300\" class=\"cart-item-img\" alt=\"S\\u{1A1}n x\\u{1ECB}t\">\n            <div class=\"cart-item-info\">\n                <span class=\"cart-item-name\">$$product-name$$</span>\n            </div>\n        </div>\n        <div class=\"d-flex-a-c d-flex-j-c\">\n            <div class=\"cart-item-price-section\">\n            <span class=\"cart-item-price\" style=\"font-size: 14px; text-align: right; width: 70px; margin-right: 4px;\">$$item-price$$</span>\n            <div class=\"quantity-control-c4\">\n                <button class=\"btn-qty btn-qty-minus\">-</button>\n                <input type=\"text\" id=\"input-qty-product-${product.id}\" value=\"$$quantity$$\" class=\"input-qty\">\n                <button class=\"btn-qty btn-qty-plus\">+</button>\n            </div>\n            </div>\n            <span style=\"color: var(--bg); margin-left: 10px; margin-right: 10px;\"> = </span>\n            <span class=\"cart-item-total-price\" style=\"text-align: right; width: 70px; color: var(--bg); font-size: 14px;\">$$total-price$$</span>\n            <div class=\"cart-item-select-action d-flex-a-c\">\n              <input ${isChecked} class=\"cart-item-checkbox ml-2\" type=\"checkbox\" product-id=\"$$product-id$$\" onclick=\"cartItemCheckboxClick(this)\">\n              <div style=\"width: 15px;\"></div>\n              <button product-id=\"$$product-id$$\" onclick=\"cartItemDeleteClick(this)\" type=\"button\" class=\"btn btn-danger\">X\\xd3A</button>\n            </div>\n        </div>\n    </div>\n            `;\n    // find trong $(`.cart-list-items`) có cart-item nào có product-id = product.id hay không\n    let existingCartItem = $(`.cart-list-items .cart-item[product-id='${product.id}']`);\n    // nếu đã tồn tại thì chỉ cần tăng số lượng lên 1 và tính lại tổng tiền cho item đó   S\n    if (existingCartItem.length > 0) {\n        let txtQuantity = existingCartItem.find(`.quantity-control-c4 .input-qty`);\n        let currentQuantity = parseInt(txtQuantity.val());\n        currentQuantity++;\n        txtQuantity.val(currentQuantity);\n        // nếu currentQuantity > 0 thì enabled checkbox\n        if (currentQuantity > 0) existingCartItem.find(`.cart-item-checkbox`).prop(\"disabled\", false);\n        // calculate total price\n        let itemPrice = existingCartItem.find(`.cart-item-price`).text();\n        itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"\\u20AB\", \"\"));\n        let totalPrice = currentQuantity * itemPrice;\n        existingCartItem.find(`.cart-item-total-price`).text(`${totalPrice.formatMoney()}\\u{20AB}`);\n        cartItemCheckboxClick();\n        c_save(saveKEY.cartAllItem);\n        return;\n    }\n    // nếu đã tồn tại thì chỉ cần tăng số lượng lên 1 và tính lại tổng tiền cho item đó   E\n    let cartItemRendered = catItem.replaceAll(\"$$product-name$$\", product.name).replaceAll(\"$$product-id$$\", product.id).replaceAll(\"$$item-price$$\", product.price.formatMoney() + \"\\u20AB\").replaceAll(\"$$quantity$$\", product.quantity).replaceAll(\"$$total-price$$\", product.totalPrice.formatMoney() + \"\\u20AB\");\n    $(`.cart-list-items`).append(cartItemRendered);\n    // ===========================create EVENT button PLUS S\n    $(`.cart-item[product-id='${product.id}']`).find(`.btn-qty-plus`).click(function() {\n        let txtQuantity = $(this).parents(`.quantity-control-c4`).find(`.input-qty`);\n        let currentQuantity = txtQuantity.val();\n        currentQuantity++;\n        txtQuantity.val(currentQuantity);\n        // nếu currentQuantity > 0 thì enabled checkbox\n        if (currentQuantity > 0) $(this).parents(`.cart-item`).find(`.cart-item-checkbox`).prop(\"disabled\", false);\n        // calculate total price\n        let itemPrice = $(this).parents(`.cart-item`).find(`.cart-item-price`).text();\n        itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"\\u20AB\", \"\"));\n        let totalPrice = currentQuantity * itemPrice;\n        $(this).parents(`.cart-item`).find(`.cart-item-total-price`).text(`${totalPrice.formatMoney()}\\u{20AB}`);\n        cartItemCheckboxClick();\n        c_save(saveKEY.cartAllItem);\n    });\n    // ===========================create EVENT button PLUS E\n    // ===========================create EVENT BTN MINUS S\n    $(`.cart-item[product-id='${product.id}']`).find(`.btn-qty-minus`).click(function() {\n        let txtQuantity = $(this).parents(`.quantity-control-c4`).find(`.input-qty`);\n        let currentQuantity = txtQuantity.val();\n        currentQuantity--;\n        txtQuantity.val(currentQuantity);\n        currentQuantity = currentQuantity < 0 ? 0 : currentQuantity;\n        $(this).parents(`.quantity-control-c4`).find(`.input-qty`).val(currentQuantity);\n        // calculate total price\n        let itemPrice = $(this).parents(`.cart-item`).find(`.cart-item-price`).text();\n        itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"\\u20AB\", \"\"));\n        let totalPrice = currentQuantity * itemPrice;\n        $(this).parents(`.cart-item`).find(`.cart-item-total-price`).text(`${totalPrice.formatMoney()}\\u{20AB}`);\n        // nếu currentQuantity = 0 thì disalbed chekbox\n        if (currentQuantity === 0) {\n            $(this).parents(`.cart-item`).find(`.cart-item-checkbox`).prop(\"checked\", false);\n            $(this).parents(`.cart-item`).find(`.cart-item-checkbox`).prop(\"disabled\", true);\n        } else $(this).parents(`.cart-item`).find(`.cart-item-checkbox`).prop(\"disabled\", false);\n        cartItemCheckboxClick();\n        c_save(saveKEY.cartAllItem);\n    });\n    // ===========================create EVENT BTN MINUS E\n    // =====================create EVENT text change in input quantity  S\n    $(`.cart-item[product-id='${product.id}']`).find(`.input-qty`).change(function() {\n        let txtQuantity = $(this);\n        let currentQuantity = txtQuantity.val();\n        if (isNaN(currentQuantity) || currentQuantity < 0) {\n            currentQuantity = 0;\n            txtQuantity.val(currentQuantity);\n        }\n        // tính lại tổng tiền\n        let itemPrice = $(this).parents(`.cart-item`).find(`.cart-item-price`).text();\n        itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"\\u20AB\", \"\"));\n        let totalPrice = currentQuantity * itemPrice;\n        $(this).parents(`.cart-item`).find(`.cart-item-total-price`).text(`${totalPrice.formatMoney()}\\u{20AB}`);\n        cartItemCheckboxClick();\n    });\n    // =====================create EVENT text change in input quantity  E\n    c_save(saveKEY.cartAllItem);\n}\nfunction cartItemDeleteClick(btn) {\n    let productId = $(btn).attr(\"product-id\");\n    $(`.cart-list-items .cart-item[product-id='${productId}']`).remove();\n    cartItemCheckboxClick();\n    c_save(saveKEY.cartAllItem);\n    showToast(\"\\u0110\\xe3 x\\xf3a s\\u1EA3n ph\\u1EA9m kh\\u1ECFi gi\\u1ECF h\\xe0ng\", \"success\", 800);\n}\n\n//# sourceMappingURL=app-code.236da1bc.js.map\n","function renderHTMLProduct_event_btn_addToCart_BuyNow() {\r\n\r\n    for (let i = 0; i < DB.products.length; i++) {\r\n\r\n        var productItem = `\r\n            <div class=\"product-card\" product-id=\"$$product-id$$\">\r\n          <div class=\"product-img-wrapper\">\r\n            <!-- Link ảnh mới của bạn -->\r\n            <img src=\"https://picsum.photos/200/300\" alt=\"Sản phẩm\">\r\n        \r\n            <!-- Các Badge đè lên ảnh ở góc trái dưới -->\r\n            <div class=\"badge-container\">\r\n              <span class=\"badge badge-date\">25-2</span>\r\n              <span class=\"badge badge-voucher\">Voucher</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"product-btn-buy-now-add-to-cart d-flex-j-sb\">\r\n            <button product-id=\"$$product-id$$\" class=\"btn-buy-now btn-buy-now-add-to-cart\">Mua Ngay</button>\r\n            <button product-id=\"$$product-id$$\" class=\"btn-add-to-cart btn-buy-now-add-to-cart\">Thêm Vào Giỏ</button>\r\n          </div>\r\n        \r\n          <div class=\"product-info\">\r\n            <div class=\"product-name\">\r\n              <span class=\"label-love\">Yêu thích+</span> \r\n              <span class=\"name\">$$product-name$$</span>\r\n            </div>\r\n            <div class=\"product-price-row\">\r\n              <span class=\"currency\">$$price$$₫</span>\r\n              <span class=\"price\"></span>\r\n              <span class=\"sold\">Đã bán $$sold$$</span>\r\n            </div>\r\n          </div>\r\n        \r\n          <!-- Nút Tìm sản phẩm tương tự (C2) nằm dưới cùng -->\r\n          <a href=\"/search-similar\" class=\"btn-similar\">Tìm sản phẩm tương tự</a>\r\n        </div>\r\n         `;\r\n\r\n      let product = DB.products[i];\r\n      let productItemRendered = productItem\r\n        .replaceAll(\"$$product-id$$\", product.id)\r\n        .replaceAll(\"$$product-name$$\", product.name)\r\n        .replaceAll(\"$$price$$\", product.price.formatMoney())\r\n        .replaceAll(\"$$sold$$\", product.sold);\r\n\r\n      $(`.product-grid`).append(productItemRendered);\r\n\r\n      // find button buy now and add to cart\r\n      $(`.btn-buy-now[product-id=\"${product.id}\"]`).click(function() {\r\n          btnBuyNowClick(product);\r\n      });\r\n\r\n      // find button add to cart and add to cart\r\n      $(`.btn-add-to-cart[product-id=\"${product.id}\"]`).click(function() {\r\n            product.quantity = 1;\r\n            product.totalPrice = product.price;\r\n            btnAddToCartClick(product);\r\n      });\r\n    }\r\n}\r\n\r\n\r\nfunction btnBuyNowClick(product) {\r\n        let user = c_load(saveKEY.userLogin);\r\n    if (!user) {\r\n        showToast(\"Vui lòng đăng nhập để mua hàng\", 'error', 2000); \r\n        c_openModal(\"modalLoginForm\");\r\n        return;\r\n    }\r\n}\r\n\r\nfunction btnAddToCartClick(product, flgShowToast) {\r\n  \r\n  let user = c_load(saveKEY.userLogin);\r\n  if (!user) {\r\n    showToast(\r\n      \"Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng\",\r\n      \"error\",\r\n      2000,\r\n    );\r\n    c_openModal(\"modalLoginForm\");\r\n    return;\r\n  }\r\n\r\n  if (flgShowToast != 'no-toast') {\r\n    showToast(`Đã thêm ${product.name} vào giỏ hàng`, \"success\", 1500);\r\n  }\r\n\r\n  let isChecked = product.isChecked ? product.isChecked : false;\r\n  isChecked = isChecked ? \"checked='checked'\" : '';\r\n  \r\n  var catItem = `\r\n    <div class=\"cart-item\" product-id=\"$$product-id$$\">\r\n\r\n        <div class=\"d-flex-a-c\">\r\n            <img src=\"https://picsum.photos/200/300\" class=\"cart-item-img\" alt=\"Sơn xịt\">\r\n            <div class=\"cart-item-info\">\r\n                <span class=\"cart-item-name\">$$product-name$$</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex-a-c d-flex-j-c\">\r\n            <div class=\"cart-item-price-section\">\r\n            <span class=\"cart-item-price\" style=\"font-size: 14px; text-align: right; width: 70px; margin-right: 4px;\">$$item-price$$</span>\r\n            <div class=\"quantity-control-c4\">\r\n                <button class=\"btn-qty btn-qty-minus\">-</button>\r\n                <input type=\"text\" id=\"input-qty-product-${product.id}\" value=\"$$quantity$$\" class=\"input-qty\">\r\n                <button class=\"btn-qty btn-qty-plus\">+</button>\r\n            </div>\r\n            </div>\r\n            <span style=\"color: var(--bg); margin-left: 10px; margin-right: 10px;\"> = </span>\r\n            <span class=\"cart-item-total-price\" style=\"text-align: right; width: 70px; color: var(--bg); font-size: 14px;\">$$total-price$$</span>\r\n            <div class=\"cart-item-select-action d-flex-a-c\">\r\n              <input ${isChecked} class=\"cart-item-checkbox ml-2\" type=\"checkbox\" product-id=\"$$product-id$$\" onclick=\"cartItemCheckboxClick(this)\">\r\n              <div style=\"width: 15px;\"></div>\r\n              <button product-id=\"$$product-id$$\" onclick=\"cartItemDeleteClick(this)\" type=\"button\" class=\"btn btn-danger\">XÓA</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n            `;\r\n\r\n  // find trong $(`.cart-list-items`) có cart-item nào có product-id = product.id hay không\r\n  let existingCartItem = $(\r\n    `.cart-list-items .cart-item[product-id='${product.id}']`,\r\n  );\r\n\r\n  // nếu đã tồn tại thì chỉ cần tăng số lượng lên 1 và tính lại tổng tiền cho item đó   S\r\n  if (existingCartItem.length > 0) {\r\n    let txtQuantity = existingCartItem.find(`.quantity-control-c4 .input-qty`);\r\n    let currentQuantity = parseInt(txtQuantity.val());\r\n    currentQuantity++;\r\n    txtQuantity.val(currentQuantity);\r\n\r\n    // nếu currentQuantity > 0 thì enabled checkbox\r\n    if (currentQuantity > 0) {\r\n      existingCartItem.find(`.cart-item-checkbox`).prop(\"disabled\", false);\r\n    }\r\n\r\n    // calculate total price\r\n    let itemPrice = existingCartItem.find(`.cart-item-price`).text();\r\n    itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"₫\", \"\"));\r\n    let totalPrice = currentQuantity * itemPrice;\r\n    existingCartItem\r\n      .find(`.cart-item-total-price`)\r\n      .text(`${totalPrice.formatMoney()}₫`);\r\n\r\n    cartItemCheckboxClick();\r\n\r\n    c_save(saveKEY.cartAllItem); \r\n    return;\r\n  }\r\n  // nếu đã tồn tại thì chỉ cần tăng số lượng lên 1 và tính lại tổng tiền cho item đó   E\r\n  \r\n  let cartItemRendered = catItem\r\n    .replaceAll(\"$$product-name$$\", product.name)\r\n    .replaceAll(\"$$product-id$$\", product.id)\r\n    .replaceAll(\"$$item-price$$\", product.price.formatMoney() + \"₫\")\r\n    .replaceAll(\"$$quantity$$\", product.quantity)\r\n    .replaceAll(\"$$total-price$$\", product.totalPrice.formatMoney() + \"₫\");\r\n\r\n  $(`.cart-list-items`).append(cartItemRendered);\r\n\r\n  // ===========================create EVENT button PLUS S\r\n  $(`.cart-item[product-id='${product.id}']`)\r\n    .find(`.btn-qty-plus`)\r\n    .click(function () {\r\n      let txtQuantity = $(this)\r\n        .parents(`.quantity-control-c4`)\r\n        .find(`.input-qty`);\r\n      let currentQuantity = txtQuantity.val();\r\n      currentQuantity++;\r\n      txtQuantity.val(currentQuantity);\r\n\r\n      // nếu currentQuantity > 0 thì enabled checkbox\r\n      if (currentQuantity > 0) {\r\n        $(this)\r\n          .parents(`.cart-item`)\r\n          .find(`.cart-item-checkbox`)\r\n          .prop(\"disabled\", false);\r\n      }\r\n\r\n      // calculate total price\r\n      let itemPrice = $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-price`)\r\n        .text();\r\n      itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"₫\", \"\"));\r\n      let totalPrice = currentQuantity * itemPrice;\r\n      $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-total-price`)\r\n        .text(`${totalPrice.formatMoney()}₫`);\r\n\r\n      cartItemCheckboxClick();\r\n\r\n      c_save(saveKEY.cartAllItem);\r\n    });\r\n  // ===========================create EVENT button PLUS E\r\n\r\n  // ===========================create EVENT BTN MINUS S\r\n  $(`.cart-item[product-id='${product.id}']`)\r\n    .find(`.btn-qty-minus`)\r\n    .click(function () {\r\n      let txtQuantity = $(this)\r\n        .parents(`.quantity-control-c4`)\r\n        .find(`.input-qty`);\r\n      let currentQuantity = txtQuantity.val();\r\n      currentQuantity--;\r\n      txtQuantity.val(currentQuantity);\r\n\r\n      currentQuantity = currentQuantity < 0 ? 0 : currentQuantity;\r\n      $(this)\r\n        .parents(`.quantity-control-c4`)\r\n        .find(`.input-qty`)\r\n        .val(currentQuantity);\r\n\r\n      // calculate total price\r\n      let itemPrice = $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-price`)\r\n        .text();\r\n      itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"₫\", \"\"));\r\n      let totalPrice = currentQuantity * itemPrice;\r\n      $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-total-price`)\r\n        .text(`${totalPrice.formatMoney()}₫`);\r\n\r\n      // nếu currentQuantity = 0 thì disalbed chekbox\r\n      if (currentQuantity === 0) {\r\n        $(this)\r\n          .parents(`.cart-item`)\r\n          .find(`.cart-item-checkbox`)\r\n          .prop(\"checked\", false);\r\n        $(this)\r\n          .parents(`.cart-item`)\r\n          .find(`.cart-item-checkbox`)\r\n          .prop(\"disabled\", true);\r\n      } else {\r\n        $(this)\r\n          .parents(`.cart-item`)\r\n          .find(`.cart-item-checkbox`)\r\n          .prop(\"disabled\", false);\r\n      }\r\n\r\n      cartItemCheckboxClick();\r\n\r\n      c_save(saveKEY.cartAllItem);\r\n    });\r\n  // ===========================create EVENT BTN MINUS E\r\n\r\n  // =====================create EVENT text change in input quantity  S\r\n  $(`.cart-item[product-id='${product.id}']`)\r\n    .find(`.input-qty`)\r\n    .change(function () {\r\n      let txtQuantity = $(this);\r\n      let currentQuantity = txtQuantity.val();\r\n      if (isNaN(currentQuantity) || currentQuantity < 0) {\r\n        currentQuantity = 0;\r\n        txtQuantity.val(currentQuantity);\r\n      }\r\n\r\n      // tính lại tổng tiền\r\n      let itemPrice = $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-price`)\r\n        .text();\r\n      itemPrice = Number(itemPrice.replaceAll(\".\", \"\").replace(\"₫\", \"\"));\r\n      let totalPrice = currentQuantity * itemPrice;\r\n      $(this)\r\n        .parents(`.cart-item`)\r\n        .find(`.cart-item-total-price`)\r\n        .text(`${totalPrice.formatMoney()}₫`);\r\n\r\n      cartItemCheckboxClick();\r\n    });\r\n  // =====================create EVENT text change in input quantity  E\r\n  c_save(saveKEY.cartAllItem); \r\n}\r\n\r\nfunction cartItemDeleteClick(btn) {\r\n    let productId = $(btn).attr(\"product-id\");\r\n    $(`.cart-list-items .cart-item[product-id='${productId}']`).remove(); \r\n    cartItemCheckboxClick();\r\n    c_save(saveKEY.cartAllItem);\r\n    showToast(\"Đã xóa sản phẩm khỏi giỏ hàng\", \"success\", 800);\r\n}\r\n"],"names":["renderHTMLProduct_event_btn_addToCart_BuyNow","i","DB","products","length","productItem","product","productItemRendered","replaceAll","id","name","price","formatMoney","sold","$","append","click","btnBuyNowClick","quantity","totalPrice","btnAddToCartClick","c_load","saveKEY","userLogin","showToast","c_openModal","flgShowToast","isChecked","catItem","existingCartItem","txtQuantity","find","currentQuantity","parseInt","val","prop","itemPrice","text","Number","replace","cartItemCheckboxClick","c_save","cartAllItem","cartItemRendered","parents","change","isNaN","cartItemDeleteClick","btn","productId","attr","remove"],"version":3,"file":"app-code.236da1bc.js.map"}