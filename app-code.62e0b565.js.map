{"mappings":"ACAA,SAAS,qBAAqB,CAAG,EAC/B,IAAM,EAAe,EAAI,SAAS,CAIlC,SAAS,IACP,EAAI,SAAS,CAAG,EAChB,EAAI,QAAQ,CAAG,CAAA,CACjB,CANA,EAAI,SAAS,CAAG,gBAChB,EAAI,QAAQ,CAAG,CAAA,EAOf,IAAI,EAAc,sBACd,EAAQ,mBAEZ,GAAI,CAAC,EAAa,CAChB,UAAU,kCAAmC,QAAS,KACtD,IACA,MACF,CAEA,IAAI,EAAc,OAAO,QAAQ,WAAW,GAAK,EAAE,CAE/C,EAAc,EAAE,CAOpB,GANA,EAAY,OAAO,CAAC,AAAC,IACf,EAAK,SAAS,EAChB,EAAY,IAAI,CAAC,EAErB,GAEI,AAAuB,IAAvB,EAAY,MAAM,CAAQ,CAC5B,UAAU,6BAA8B,QAAS,KACjD,IACA,MACF,CAEA,qCACE,CACE,MAAO,mBACP,uBACE,yCAAyC,EAC7C,EACA,CAAC,EAAmB,SAKS,EAJL,EAKxB,GAAI,EAAmB,CACrB,IAAI,EAAO,KAAK,SAAS,CAAC,GAC1B,EAAO,eAAe,GAEtB,UAAU,yBAA0B,UAAW,KAE/C,8BAA8B,CAAE,MAAA,EAAO,KAAA,CAAK,GAAG,IAAI,CAAC,KAGlD,EAAE,oBAAoB,IAAI,CAAC,cAAc,IAAI,CAAC,WAEtC,AADY,EAAE,IAAI,EAAE,IAAI,CAAC,uBAAuB,IAAI,CAAC,YAErD,EAAE,IAAI,EAAE,MAAM,EAEtB,GAGA,OAAO,QAAQ,WAAW,EAG1B,wBAGA,IAAI,EAAQ,mBACZ,EAAE,cAAc,QAAQ,CAAC,UACzB,0BAA0B,GAAO,IAAI,CAAC,AAAC,IACjC,EAAI,KAAK,CAAG,IACd,EAAE,cAAc,WAAW,CAAC,UAC5B,EAAE,cAAc,IAAI,CAAC,CAAC,iBAAQ,EAAE,EAAI,KAAK,CAAC,wBAAS,CAAC,EAExD,GAGA,GACF,EACF,MACE,UAAU,WAAY,SACtB,GAzCF,EA4CJ","sources":["<anon>","js/cart_btnMuaHang.js"],"sourcesContent":["function cart_btnMuaHangClick(btn) {\n    const originalText = btn.innerText;\n    btn.innerText = \"\\u0110ang x\\u1EED l\\xfd...\";\n    btn.disabled = true;\n    function resetButton() {\n        btn.innerText = originalText;\n        btn.disabled = false;\n    }\n    let isUserLogin = c_is_user_has_login();\n    let phone = c_get_user_phone();\n    if (!isUserLogin) {\n        showToast(\"Vui l\\xf2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 mua h\\xe0ng!\", \"error\", 3000);\n        resetButton();\n        return;\n    }\n    let cartAllItem = c_load(saveKEY.cartAllItem) || [];\n    // loop all item in cartAllItem, if item is checked then add to list item will buy\n    let itemWillBuy = [];\n    cartAllItem.forEach((item)=>{\n        if (item.isChecked) itemWillBuy.push(item);\n    });\n    if (itemWillBuy.length === 0) {\n        showToast(\"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m \\u0111\\u1EC3 mua h\\xe0ng!\", \"error\", 2000);\n        resetButton();\n        return;\n    }\n    email_sendMail_thongBao_DON_HANG_MOI({\n        phone: c_get_user_phone(),\n        HTML_Table_listProduct: c_convertListProduct_willBUY_ToHTMLTable(itemWillBuy)\n    }, (isSendMailSuccess, message)=>{\n        callBackAfterSendMail(isSendMailSuccess, message);\n    });\n    function callBackAfterSendMail(isSendMailSuccess, message) {\n        if (isSendMailSuccess) {\n            let info = JSON.stringify(itemWillBuy);\n            info = c_encodeBase64(info);\n            showToast(\"\\u0111\\xe3 g\\u1EEDi mail th\\xe0nh c\\xf4ng\", \"success\", 2000);\n            api_InsertPurchaseOrder_Async({\n                phone,\n                info\n            }).then(()=>{\n                // xoá các sp vừa tạo đơn hàng xong\n                $(`.cart-list-items`).find(`.cart-item`).each(function() {\n                    let isChecked = $(this).find(`.cart-item-checkbox`).prop('checked');\n                    if (isChecked) $(this).remove();\n                });\n                // save cart DB\n                c_save(saveKEY.cartAllItem);\n                // sau khi xoá xong thì render lại cart\n                cart_renderCartByUser();\n                // cập nhật count PO text của button hiển thị kiểu \"Đang có XXX đơn hàng\" S\n                let phone = c_get_user_phone();\n                $(`.btnShowPO`).addClass(\"d-none\");\n                api_countPO_byPhone_Async(phone).then((res)=>{\n                    if (res.count > 0) {\n                        $(`.btnShowPO`).removeClass(\"d-none\");\n                        $(`.btnShowPO`).html(`\\u{110}ang c\\xf3 ${res.count} \\u{111}\\u{1A1}n h\\xe0ng`);\n                    }\n                });\n                // cập nhật count PO text của button hiển thị kiểu \"Đang có XXX đơn hàng\" E\n                resetButton();\n            });\n        } else {\n            showToast(`mail l\\u{1ED7}i`, 'error');\n            resetButton();\n        }\n    }\n}\n\n//# sourceMappingURL=app-code.62e0b565.js.map\n","function cart_btnMuaHangClick(btn) {\r\n  const originalText = btn.innerText;\r\n  btn.innerText = \"Đang xử lý...\";\r\n  btn.disabled = true;\r\n\r\n  function resetButton() {\r\n    btn.innerText = originalText;\r\n    btn.disabled = false;\r\n  }\r\n\r\n  let isUserLogin = c_is_user_has_login();\r\n  let phone = c_get_user_phone();\r\n\r\n  if (!isUserLogin) {\r\n    showToast(\"Vui lòng đăng nhập để mua hàng!\", \"error\", 3000);\r\n    resetButton();\r\n    return;\r\n  }\r\n\r\n  let cartAllItem = c_load(saveKEY.cartAllItem) || [];\r\n  // loop all item in cartAllItem, if item is checked then add to list item will buy\r\n  let itemWillBuy = [];\r\n  cartAllItem.forEach((item) => {\r\n    if (item.isChecked) {\r\n      itemWillBuy.push(item);\r\n    }\r\n  });\r\n\r\n  if (itemWillBuy.length === 0) {\r\n    showToast(\"Chọn sản phẩm để mua hàng!\", \"error\", 2000);\r\n    resetButton();\r\n    return;\r\n  }\r\n\r\n  email_sendMail_thongBao_DON_HANG_MOI(\r\n    {\r\n      phone: c_get_user_phone(),\r\n      HTML_Table_listProduct:\r\n        c_convertListProduct_willBUY_ToHTMLTable(itemWillBuy),\r\n    },\r\n    (isSendMailSuccess, message) => {\r\n      callBackAfterSendMail(isSendMailSuccess, message);\r\n    },\r\n  );\r\n\r\n  function callBackAfterSendMail(isSendMailSuccess, message) {\r\n    if (isSendMailSuccess) {\r\n      let info = JSON.stringify(itemWillBuy);\r\n      info = c_encodeBase64(info);\r\n\r\n      showToast(\"đã gửi mail thành công\", \"success\", 2000);\r\n\r\n      api_InsertPurchaseOrder_Async({ phone, info }).then(() => {\r\n\r\n        // xoá các sp vừa tạo đơn hàng xong\r\n        $(`.cart-list-items`).find(`.cart-item`).each(function() {\r\n            let isChecked = $(this).find(`.cart-item-checkbox`).prop('checked');\r\n            if (isChecked) {\r\n                $(this).remove();\r\n            }\r\n        });\r\n\r\n        // save cart DB\r\n        c_save(saveKEY.cartAllItem); \r\n\r\n        // sau khi xoá xong thì render lại cart\r\n        cart_renderCartByUser();\r\n\r\n        // cập nhật count PO text của button hiển thị kiểu \"Đang có XXX đơn hàng\" S\r\n        let phone = c_get_user_phone();\r\n        $(`.btnShowPO`).addClass(\"d-none\");\r\n        api_countPO_byPhone_Async(phone).then((res) => {\r\n          if (res.count > 0) {\r\n            $(`.btnShowPO`).removeClass(\"d-none\");\r\n            $(`.btnShowPO`).html(`Đang có ${res.count} đơn hàng`);\r\n          }\r\n        });\r\n        // cập nhật count PO text của button hiển thị kiểu \"Đang có XXX đơn hàng\" E\r\n\r\n        resetButton();\r\n      });\r\n    } else {\r\n      showToast(`mail lỗi`, 'error');\r\n      resetButton();\r\n    }\r\n  }\r\n}\r\n"],"names":["cart_btnMuaHangClick","btn","originalText","innerText","resetButton","disabled","isUserLogin","c_is_user_has_login","phone","c_get_user_phone","showToast","cartAllItem","c_load","saveKEY","itemWillBuy","forEach","item","isChecked","push","length","email_sendMail_thongBao_DON_HANG_MOI","HTML_Table_listProduct","c_convertListProduct_willBUY_ToHTMLTable","isSendMailSuccess","message","info","JSON","stringify","c_encodeBase64","api_InsertPurchaseOrder_Async","then","$","find","each","prop","remove","c_save","cart_renderCartByUser","addClass","api_countPO_byPhone_Async","res","count","removeClass","html"],"version":3,"file":"app-code.62e0b565.js.map"}