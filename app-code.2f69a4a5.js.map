{"mappings":"ACEA,eAAe,sBAAsB,CAAG,EAEpC,SAAS,IACJ,EAAI,SAAS,CAAG,EAChB,EAAI,QAAQ,CAAG,CAAA,CACpB,CAEA,IAAM,EAAe,EAAI,SAAS,AAClC,CAAA,EAAI,SAAS,CAAG,gBAChB,EAAI,QAAQ,CAAG,CAAA,EAIf,IAAI,EAAQ,EAAE,kBAAkB,GAAG,GACnC,GAAI,CAAC,EAAO,CACR,UAAU,+BAAgC,SAC1C,EAAE,kBAAkB,KAAK,GAEzB,IACA,MACJ,CAEA,IAAI,EAAO,EAAE,iBAAiB,GAAG,GAC5B,IACD,UAAU,0BAA2B,SACrC,EAAE,iBAAiB,KAAK,GACxB,KAIJ,IAAI,EAAM,MAAM,yBAAyB,GACzC,GAAI,GAAK,QAAS,CACd,UAAU,2BAA4B,SACtC,IACA,MACJ,CAYA,GADE,EAAM,MAAM,wBARD,CACT,MAAA,EACA,KAAA,EACA,KAAM,WACN,MAAO,WACP,KAAM,IACR,GAGE,GAAK,QACL,UAAU,yDAA0D,eACjE,CACH,UAAU,mBAAoB,WAC9B,IACA,MACJ,CAIA,IAAI,EAAM,CACN,MAAA,EACA,KAAA,CACJ,EAEA,OAAO,QAAQ,KAAK,CAAE,GACtB,OAAO,QAAQ,SAAS,CAAE,GAE1B,EAAE,kBAAkB,GAAG,CAAC,IACxB,EAAE,iBAAiB,GAAG,CAAC,IAGvB,AADQ,EAAE,0BACR,WAAW,CAAC,UACd,EAAE,qBAAqB,QAAQ,CAAC,UAEhC,aA7Dc,kBA+Dd,GACJ","sources":["<anon>","js/btnRegistNewuserClick.js"],"sourcesContent":["async function btnRegistNewuserClick(btn) {\n    function resetButton() {\n        btn.innerText = originalText;\n        btn.disabled = false;\n    }\n    const originalText = btn.innerText;\n    btn.innerText = \"\\u0110ang x\\u1EED l\\xfd...\";\n    btn.disabled = true;\n    let modalID = \"modalLoginForm\";\n    let phone = $(\"#txtLoginPhone\").val();\n    if (!phone) {\n        showToast(\"Vui l\\xf2ng nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i.\", \"error\");\n        $(\"#txtLoginPhone\").focus();\n        resetButton();\n        return;\n    }\n    let pass = $(\"#txtLoginPass\").val();\n    if (!pass) {\n        showToast(\"Vui l\\xf2ng nh\\u1EADp m\\u1EADt kh\\u1EA9u.\", \"error\");\n        $(\"#txtLoginPass\").focus();\n        resetButton();\n    }\n    // tìm user tồn tại phone chưa\n    let res = await api_getUserByPhone_Async(phone);\n    if (res?.success) {\n        showToast(\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i \\u0111\\xe3 t\\u1ED3n t\\u1EA1i\", \"error\");\n        resetButton();\n        return;\n    }\n    let info = {\n        phone,\n        pass,\n        name: \"TODO_DEV\",\n        email: \"TODO_DEV\",\n        role: \"kh\"\n    };\n    res = await api_insertNewUser_Async(info);\n    if (res?.success) showToast(\"\\u0110\\u0103ng k\\xfd th\\xe0nh c\\xf4ng. B\\u1EA1n c\\xf3 th\\u1EC3 \\u0111\\u0103ng nh\\u1EADp ngay b\\xe2y gi\\u1EDD.\", \"success\");\n    else {\n        showToast(\"\\u0110\\u0103ng k\\xfd th\\u1EA5t b\\u1EA1i\", \"success\");\n        resetButton();\n        return;\n    }\n    //let h = $(`#holder_btn_login__infoUser`);\n    //h.html(`<span style=\"color: white; font-weight: bold; font-size: 14px;\">Xin Chào, ${phone}</span> | <button class=\"btn-logout\" onclick=\"event.preventDefault(); btnLogoutClick(this);\">Đăng Xuất</button>`);\n    let obj = {\n        phone,\n        pass\n    };\n    c_save(saveKEY.phone, obj);\n    c_save(saveKEY.userLogin, obj);\n    $(\"#txtLoginPhone\").val('');\n    $(\"#txtLoginPass\").val('');\n    let h = $(`#holder_Login_userInfo`);\n    h.removeClass(\"d-none\");\n    $(`#holder_btn_login`).addClass(\"d-none\");\n    c_closeModal(modalID);\n    resetButton();\n}\n\n//# sourceMappingURL=app-code.2f69a4a5.js.map\n","\r\n\r\nasync function btnRegistNewuserClick(btn) {\r\n   \r\n    function resetButton() {\r\n         btn.innerText = originalText;\r\n         btn.disabled = false;\r\n    }\r\n\r\n    const originalText = btn.innerText;\r\n    btn.innerText = \"Đang xử lý...\";\r\n    btn.disabled = true;\r\n\r\n    let modalID = \"modalLoginForm\";\r\n\r\n    let phone = $(\"#txtLoginPhone\").val();\r\n    if (!phone) {\r\n        showToast(\"Vui lòng nhập số điện thoại.\", \"error\");\r\n        $(\"#txtLoginPhone\").focus();\r\n\r\n        resetButton() ;\r\n        return; \r\n    } \r\n    \r\n    let pass = $(\"#txtLoginPass\").val();\r\n    if (!pass) {\r\n        showToast(\"Vui lòng nhập mật khẩu.\", \"error\");\r\n        $(\"#txtLoginPass\").focus();\r\n        resetButton() ;\r\n    }\r\n\r\n   // tìm user tồn tại phone chưa\r\n    let res = await api_getUserByPhone_Async(phone);\r\n    if (res?.success) {\r\n        showToast(\"Số điện thoại đã tồn tại\", \"error\");\r\n        resetButton();\r\n        return;\r\n    }\r\n\r\n\r\n      let info = {\r\n        phone,\r\n        pass,\r\n        name: \"TODO_DEV\",\r\n        email: \"TODO_DEV\",\r\n        role: \"kh\",\r\n      };\r\n\r\n      res = await api_insertNewUser_Async(info);\r\n    if (res?.success) {\r\n        showToast(\"Đăng ký thành công. Bạn có thể đăng nhập ngay bây giờ.\", \"success\");\r\n    } else {\r\n        showToast(\"Đăng ký thất bại\", \"success\");\r\n        resetButton();\r\n        return;\r\n    }\r\n\r\n    //let h = $(`#holder_btn_login__infoUser`);\r\n    //h.html(`<span style=\"color: white; font-weight: bold; font-size: 14px;\">Xin Chào, ${phone}</span> | <button class=\"btn-logout\" onclick=\"event.preventDefault(); btnLogoutClick(this);\">Đăng Xuất</button>`);\r\n    let obj = {\r\n        phone,\r\n        pass\r\n    }\r\n    \r\n    c_save(saveKEY.phone, obj);\r\n    c_save(saveKEY.userLogin, obj);\r\n\r\n    $(\"#txtLoginPhone\").val('');\r\n    $(\"#txtLoginPass\").val('');\r\n\r\n    let h = $(`#holder_Login_userInfo`);\r\n    h.removeClass(\"d-none\");\r\n    $(`#holder_btn_login`).addClass(\"d-none\");\r\n\r\n    c_closeModal(modalID);\r\n\r\n    resetButton();\r\n}"],"names":["btnRegistNewuserClick","btn","resetButton","innerText","originalText","disabled","phone","$","val","showToast","focus","pass","res","api_getUserByPhone_Async","success","api_insertNewUser_Async","name","email","role","obj","c_save","saveKEY","userLogin","h","removeClass","addClass","c_closeModal"],"version":3,"file":"app-code.2f69a4a5.js.map"}